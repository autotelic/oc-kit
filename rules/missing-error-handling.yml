id: missing-error-handling-improved
message: "Async call without proper error handling. Consider wrapping in try-catch block."
severity: error
language: TypeScript
rule:
  pattern: await $CALL
  not:
    inside:
      stopBy: end
      any:
        - kind: try_statement
        - kind: catch_clause  
        - pattern: |
            try {
              $$$
            } catch ($ERR) {
              $$$
            }
        - pattern: |
            try {
              $$$
            } catch ($ERR) {
              $$$
            } finally {
              $$$
            }